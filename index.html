<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>리스트 저장기</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        #admin-password {
            display: none;
        }
    </style>
</head>
<body>
    <button id="admin-btn">관리자 페이지</button>
    <div id="admin-password">
        <input type="password" id="password" placeholder="비밀번호 입력">
        <button id="password-submit">확인</button>
    </div>

    <div id="main">
        <input type="text" id="name-input" placeholder="이름 입력">
        <button id="save-btn">저장</button>
    </div>

    <script>
        const saveButton = document.getElementById('save-btn');
        const nameInput = document.getElementById('name-input');
        const adminBtn = document.getElementById('admin-btn');
        const adminPassword = document.getElementById('admin-password');
        const passwordInput = document.getElementById('password');
        const passwordSubmit = document.getElementById('password-submit');

        let savedNames = [];

        saveButton.addEventListener('click', async () => {
            const name = nameInput.value;
            if (name) {
                savedNames.push(name);
                await fetch('/api/save', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ names: savedNames })
                });
                nameInput.value = '';
            }
        });

        adminBtn.addEventListener('click', () => {
            adminPassword.style.display = 'block';
        });

        passwordSubmit.addEventListener('click', async () => {
            const password = passwordInput.value;
            if (password === '123') {
                const response = await fetch('/api/names');
                const data = await response.json();
                alert('저장된 이름: ' + data.names.join(', '));
            } else {
                alert('비밀번호가 틀렸습니다.');
            }
        });
    </script>
</body>
</html>
